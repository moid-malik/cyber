"use client";
import { useState } from "react";
import Link from "next/link";
import styles from "./page.module.css";
import { allProducts } from "@/data/productsData";
import { useSearchParams } from "next/navigation";

const Page = () => {
  const [selectedVariant, setSelectedVariant] = useState(1);
  const params = useSearchParams();
  const index = params.get("productnumber");
  const product = allProducts[Number(index)];

  const handleVariantClick = (variant: number) => {
    setSelectedVariant(variant);
  };

  if (!product) {
    return <div>Product not found.</div>;
  }

  return (
    <div className={styles.container}>
      <div className={styles.images}>
        <div className={styles.image}>
          <img src={product.imagesource} alt={product.producttitle} />
        </div>
      </div>
      <div className={styles.info}>
        <div className={styles.content}>
          <div className={styles.title}>
            <p>{product.producttitle}</p>
            <div className={styles.prices}>
              <div className={styles.price}>${product.price}</div>
              {product.beforeDiscountPrice &&
                product.beforeDiscountPrice > 0 && (
                  <div className={styles.beforeDiscountPrice}>
                    ${product.beforeDiscountPrice}
                  </div>
                )}
            </div>
          </div>
          <div className={styles.details}>
            <div className={styles.varients}>
              {product.variants.map((variant, index) => (
                <div
                  key={index}
                  className={`${styles.varientCard} ${
                    selectedVariant === index ? styles.selectedVarient : ""
                  }`}
                  onClick={() => handleVariantClick(index)}
                >
                  {variant.name}
                </div>
              ))}
            </div>
            <div className={styles.description}>{product.description}</div>
          </div>
        </div>
        <div className={styles.buttons}>
          <Link href={""} onClick={()=> alert("gonna add the backend in further assignments.")} className={styles.wishListBtn}>
            Add to wishlist
          </Link>
          <Link href={""} onClick={()=> alert("gonna add the backend in further assignments.")} className={styles.addToCartBtn}>
            Add to cart
          </Link>
        </div>
        <div className={styles.otherInfoCards}>
          <div className={styles.bottomCardContent}>
            <div className={styles.bottomIconContainer}>
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M21.47 11.185L20.44 9.755C20.2095 9.43121 19.9051 9.16706 19.552 8.98445C19.199 8.80184 18.8075 8.70604 18.41 8.705H14.03V6.565C14.03 5.90196 13.7666 5.26608 13.2978 4.79724C12.8289 4.32839 12.193 4.065 11.53 4.065H4.56C3.89753 4.06685 3.26272 4.33083 2.79428 4.79928C2.32583 5.26772 2.06185 5.90253 2.06 6.565V16.505C2.06 16.9028 2.21804 17.2844 2.49934 17.5657C2.78065 17.847 3.16218 18.005 3.56 18.005H4.78C4.85551 18.54 5.12171 19.0298 5.52961 19.3842C5.93751 19.7385 6.45967 19.9337 7 19.9337C7.54034 19.9337 8.0625 19.7385 8.4704 19.3842C8.87829 19.0298 9.14449 18.54 9.22 18.005H14.78C14.8555 18.54 15.1217 19.0298 15.5296 19.3842C15.9375 19.7385 16.4597 19.9337 17 19.9337C17.5403 19.9337 18.0625 19.7385 18.4704 19.3842C18.8783 19.0298 19.1445 18.54 19.22 18.005H20.44C20.8378 18.005 21.2194 17.847 21.5007 17.5657C21.782 17.2844 21.94 16.9028 21.94 16.505V12.635C21.9376 12.1146 21.7733 11.6079 21.47 11.185ZM7 18.935C6.75277 18.935 6.5111 18.8617 6.30554 18.7243C6.09998 18.587 5.93976 18.3918 5.84515 18.1634C5.75054 17.9349 5.72579 17.6836 5.77402 17.4411C5.82225 17.1987 5.9413 16.9759 6.11612 16.8011C6.29093 16.6263 6.51366 16.5073 6.75614 16.459C6.99861 16.4108 7.24995 16.4355 7.47836 16.5302C7.70676 16.6248 7.90199 16.785 8.03934 16.9905C8.17669 17.1961 8.25 17.4378 8.25 17.685C8.25 18.0165 8.11831 18.3345 7.88388 18.5689C7.64946 18.8033 7.33152 18.935 7 18.935ZM13.03 17.005H9.15C9.0044 16.5491 8.71766 16.1513 8.3312 15.8691C7.94474 15.5868 7.47856 15.4347 7 15.4347C6.52144 15.4347 6.05526 15.5868 5.6688 15.8691C5.28234 16.1513 4.9956 16.5491 4.85 17.005H3.56C3.42739 17.005 3.30022 16.9523 3.20645 16.8586C3.11268 16.7648 3.06 16.6376 3.06 16.505V6.565C3.06 6.16718 3.21804 5.78565 3.49934 5.50434C3.78065 5.22304 4.16218 5.065 4.56 5.065H11.53C11.9278 5.065 12.3094 5.22304 12.5907 5.50434C12.872 5.78565 13.03 6.16718 13.03 6.565V17.005ZM17 18.935C16.7528 18.935 16.5111 18.8617 16.3055 18.7243C16.1 18.587 15.9398 18.3918 15.8452 18.1634C15.7505 17.9349 15.7258 17.6836 15.774 17.4411C15.8223 17.1987 15.9413 16.9759 16.1161 16.8011C16.2909 16.6263 16.5137 16.5073 16.7561 16.459C16.9986 16.4108 17.2499 16.4355 17.4784 16.5302C17.7068 16.6248 17.902 16.785 18.0393 16.9905C18.1767 17.1961 18.25 17.4378 18.25 17.685C18.25 18.0165 18.1183 18.3345 17.8839 18.5689C17.6495 18.8033 17.3315 18.935 17 18.935ZM20.94 16.505C20.94 16.6376 20.8873 16.7648 20.7936 16.8586C20.6998 16.9523 20.5726 17.005 20.44 17.005H19.15C19.0044 16.5491 18.7177 16.1513 18.3312 15.8691C17.9447 15.5868 17.4786 15.4347 17 15.4347C16.5214 15.4347 16.0553 15.5868 15.6688 15.8691C15.2823 16.1513 14.9956 16.5491 14.85 17.005H14.03V9.705H18.41C18.6486 9.7066 18.8834 9.76449 19.0954 9.87396C19.3074 9.98344 19.4906 10.1414 19.63 10.335L20.66 11.765C20.84 12.0196 20.9377 12.3232 20.94 12.635V16.505Z"
                  fill="#797979"
                />
                <path
                  d="M18.029 12.205H16.029C15.8964 12.205 15.7692 12.1523 15.6754 12.0586C15.5817 11.9648 15.529 11.8376 15.529 11.705C15.529 11.5724 15.5817 11.4452 15.6754 11.3515C15.7692 11.2577 15.8964 11.205 16.029 11.205H18.029C18.1616 11.205 18.2888 11.2577 18.3826 11.3515C18.4763 11.4452 18.529 11.5724 18.529 11.705C18.529 11.8376 18.4763 11.9648 18.3826 12.0586C18.2888 12.1523 18.1616 12.205 18.029 12.205Z"
                  fill="#797979"
                />
              </svg>
            </div>
            <div>
              <p className={styles.bottomCardTitle}>Free Delivery</p>
              <span className={styles.bottomCardInfo}>1-2 Days</span>
            </div>
          </div>

          <div className={styles.bottomCardContent}>
            <div className={styles.bottomIconContainer}>
              <svg
                width="25"
                height="24"
                viewBox="0 0 25 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M7.76859 1.25H16.898C17.4679 1.24998 17.9519 1.24997 18.3518 1.29132C18.7776 1.33534 19.1711 1.43094 19.5429 1.66071C19.9147 1.89048 20.1762 2.19971 20.406 2.56088C20.6218 2.9001 20.8382 3.33297 21.0931 3.8428L21.1096 3.87574C21.1193 3.89518 21.1282 3.91504 21.1362 3.93526L22.5398 7.4834C22.7068 7.90559 22.8919 8.4323 22.946 8.97128C23.0014 9.52258 22.9254 10.1541 22.4934 10.7019C22.1401 11.15 21.6488 11.4863 21.0833 11.6463V21.25H22.3333C22.7475 21.25 23.0833 21.5858 23.0833 22C23.0833 22.4142 22.7475 22.75 22.3333 22.75H2.33333C1.91912 22.75 1.58333 22.4142 1.58333 22C1.58333 21.5858 1.91912 21.25 2.33333 21.25H3.58333V11.6464C3.01779 11.4863 2.52645 11.15 2.17308 10.7019C1.74112 10.1541 1.66515 9.52257 1.72051 8.97127C1.77463 8.43229 1.95972 7.90559 2.12673 7.4834L3.53034 3.93526C3.53834 3.91504 3.54721 3.89518 3.55694 3.87574L3.57343 3.84275C3.82831 3.33295 4.04472 2.90009 4.26056 2.56088C4.49037 2.19971 4.75186 1.89048 5.12364 1.66071C5.49541 1.43094 5.88894 1.33534 6.31475 1.29132C6.71467 1.24997 7.19862 1.24998 7.76859 1.25ZM18.3332 10.8875C18.6692 11.2433 19.0991 11.5096 19.5833 11.6465V21.25H15.5833V18.4678C15.5833 18.028 15.5833 17.6486 15.5551 17.3374C15.5253 17.0082 15.4592 16.6822 15.2819 16.375C15.0844 16.033 14.8003 15.7489 14.4583 15.5514C14.1511 15.3741 13.8251 15.308 13.496 15.2782C13.1847 15.25 12.8053 15.25 12.3655 15.25H12.3011C11.8613 15.25 11.4819 15.25 11.1706 15.2782C10.8415 15.308 10.5155 15.3741 10.2083 15.5514C9.86629 15.7489 9.58225 16.033 9.38477 16.375C9.2074 16.6822 9.14135 17.0082 9.11151 17.3374C9.0833 17.6486 9.08331 18.028 9.08333 18.4677V21.25H5.08333V11.6465C5.56746 11.5095 5.99731 11.2433 6.33325 10.8875C6.83463 11.4186 7.54523 11.75 8.33324 11.75C9.12126 11.75 9.83186 11.4186 10.3332 10.8875C10.8346 11.4186 11.5452 11.75 12.3332 11.75C13.1212 11.75 13.8318 11.4186 14.3332 10.8875C14.8346 11.4186 15.5452 11.75 16.3332 11.75C17.1212 11.75 17.8318 11.4186 18.3332 10.8875ZM10.5833 21.25H14.0833V18.5C14.0833 18.0189 14.0826 17.7082 14.0612 17.4727C14.0408 17.2476 14.0064 17.1659 13.9828 17.125C13.917 17.011 13.8223 16.9163 13.7083 16.8505C13.6674 16.8269 13.5857 16.7925 13.3606 16.7721C13.1251 16.7507 12.8144 16.75 12.3333 16.75C11.8522 16.75 11.5415 16.7507 11.306 16.7721C11.0809 16.7925 10.9992 16.8269 10.9583 16.8505C10.8443 16.9163 10.7496 17.011 10.6838 17.125C10.6602 17.1659 10.6258 17.2476 10.6054 17.4727C10.584 17.7082 10.5833 18.0189 10.5833 18.5V21.25ZM7.08324 9C7.08324 9.69036 7.64289 10.25 8.33324 10.25C9.0236 10.25 9.58324 9.69036 9.58324 9C9.58324 8.58579 9.91903 8.25 10.3332 8.25C10.7474 8.25 11.0832 8.58579 11.0832 9C11.0832 9.69036 11.6429 10.25 12.3332 10.25C13.0236 10.25 13.5832 9.69036 13.5832 9C13.5832 8.58579 13.919 8.25 14.3332 8.25C14.7474 8.25 15.0832 8.58579 15.0832 9C15.0832 9.69036 15.6429 10.25 16.3332 10.25C17.0236 10.25 17.5832 9.69036 17.5832 9C17.5832 8.58579 17.919 8.25 18.3332 8.25C18.7474 8.25 19.0832 8.58579 19.0832 9C19.0832 9.69036 19.6429 10.25 20.3332 10.25C20.7312 10.25 21.0855 10.0649 21.3156 9.77305C21.4295 9.62859 21.4846 9.43094 21.4535 9.12114C21.4212 8.79903 21.3023 8.43275 21.145 8.03518L19.7534 4.51739C19.4857 3.98204 19.3068 3.62749 19.1404 3.36612C18.9805 3.1147 18.8658 3.00562 18.7543 2.93669C18.6428 2.86776 18.4939 2.81401 18.1975 2.78336C17.8838 2.75093 17.4779 2.75 16.8611 2.75H7.80547C7.18866 2.75 6.78273 2.75093 6.46902 2.78336C6.1726 2.81401 6.02377 2.86776 5.91223 2.93669C5.8007 3.00562 5.68607 3.1147 5.52609 3.36612C5.35979 3.62749 5.18088 3.98204 4.91316 4.51739L3.52156 8.03518C3.36428 8.43275 3.24535 8.79903 3.213 9.12115C3.18189 9.43095 3.23699 9.62861 3.35092 9.77307C3.58103 10.0649 3.93529 10.25 4.33324 10.25C5.0236 10.25 5.58324 9.69036 5.58324 9C5.58324 8.58579 5.91903 8.25 6.33324 8.25C6.74746 8.25 7.08324 8.58579 7.08324 9Z"
                  fill="#797979"
                />
              </svg>
            </div>
            <div>
              <p className={styles.bottomCardTitle}>In stock</p>
              <span className={styles.bottomCardInfo}>Today</span>
            </div>
          </div>

          <div className={styles.bottomCardContent}>
            <div className={styles.bottomIconContainer}>
              <svg
                width="25"
                height="24"
                viewBox="0 0 25 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M11.4567 15.17C11.2567 15.17 11.0667 15.09 10.9267 14.95L8.50668 12.53C8.21668 12.24 8.21668 11.76 8.50668 11.47C8.79668 11.18 9.27668 11.18 9.56668 11.47L11.4567 13.36L15.7567 9.06003C16.0467 8.77003 16.5267 8.77003 16.8167 9.06003C17.1067 9.35003 17.1067 9.83003 16.8167 10.12L11.9867 14.95C11.8467 15.09 11.6567 15.17 11.4567 15.17Z"
                  fill="#797979"
                />
                <path
                  d="M12.6667 22.75C12.0367 22.75 11.4067 22.54 10.9167 22.12L9.33669 20.76C9.17669 20.62 8.77669 20.48 8.56669 20.48H6.84669C5.36669 20.48 4.16669 19.28 4.16669 17.8V16.09C4.16669 15.88 4.02669 15.49 3.88669 15.33L2.53669 13.74C1.71669 12.77 1.71669 11.24 2.53669 10.27L3.88669 8.68C4.02669 8.52 4.16669 8.13 4.16669 7.92V6.2C4.16669 4.72 5.36669 3.52 6.84669 3.52H8.57669C8.78669 3.52 9.18669 3.37 9.34669 3.24L10.9267 1.88C11.9067 1.04 13.4367 1.04 14.4167 1.88L15.9967 3.24C16.1567 3.38 16.5567 3.52 16.7667 3.52H18.4667C19.9467 3.52 21.1467 4.72 21.1467 6.2V7.9C21.1467 8.11 21.2967 8.51 21.4367 8.67L22.7967 10.25C23.6367 11.23 23.6367 12.76 22.7967 13.74L21.4367 15.32C21.2967 15.48 21.1467 15.88 21.1467 16.09V17.79C21.1467 19.27 19.9467 20.47 18.4667 20.47H16.7667C16.5567 20.47 16.1567 20.62 15.9967 20.75L14.4167 22.11C13.9267 22.54 13.2967 22.75 12.6667 22.75ZM6.84669 5.02C6.19669 5.02 5.66669 5.55 5.66669 6.2V7.91C5.66669 8.48 5.39669 9.21 5.02669 9.64L3.67669 11.23C3.32669 11.64 3.32669 12.35 3.67669 12.76L5.02669 14.35C5.39669 14.79 5.66669 15.51 5.66669 16.08V17.79C5.66669 18.44 6.19669 18.97 6.84669 18.97H8.57669C9.15669 18.97 9.88669 19.24 10.3267 19.62L11.9067 20.98C12.3167 21.33 13.0367 21.33 13.4467 20.98L15.0267 19.62C15.4667 19.25 16.1967 18.97 16.7767 18.97H18.4767C19.1267 18.97 19.6567 18.44 19.6567 17.79V16.09C19.6567 15.51 19.9267 14.78 20.3067 14.34L21.6667 12.76C22.0167 12.35 22.0167 11.63 21.6667 11.22L20.3067 9.64C19.9267 9.2 19.6567 8.47 19.6567 7.89V6.2C19.6567 5.55 19.1267 5.02 18.4767 5.02H16.7767C16.1967 5.02 15.4667 4.75 15.0267 4.37L13.4467 3.01C13.0367 2.66 12.3167 2.66 11.9067 3.01L10.3267 4.38C9.88669 4.75 9.14669 5.02 8.57669 5.02H6.84669Z"
                  fill="#797979"
                />
              </svg>
            </div>
            <div>
              <p className={styles.bottomCardTitle}>Guranteed</p>
              <span className={styles.bottomCardInfo}>1 Year</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default Page;
